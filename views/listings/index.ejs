<% layout("/layouts/boilerplate.ejs") %>
<% if (typeof category !== 'undefined') { %>
  <h2>Category: <%= category.charAt(0).toUpperCase() + category.slice(1) %></h2>
<% }%>
<div class="filter-bar">
  <div class="filter-scroll">
    <a href="/listings/category/trending" class="filter"><i class="fa-solid fa-fire"></i><br>Trending</a>
    <a href="/listings/category/rooms" class="filter"><i class="fa-solid fa-bed"></i><br>Rooms</a>
    <a href="/listings/category/pool" class="filter"><i class="fa-solid fa-water-ladder"></i><br>Pool</a>
    <a href="/listings/category/beach" class="filter"><i class="fa-solid fa-umbrella-beach"></i><br>Beach</a>
    <a href="/listings/category/castle" class="filter"><i class="fa-solid fa-chess-rook"></i><br>Castle</a>
    <a href="/listings/category/mountain" class="filter"><i class="fa-solid fa-mountain"></i><br>Mountain</a>
    <a href="/listings/category/cities" class="filter"><i class="fa-solid fa-city"></i><br>TopCites</a>
   
  </div>

  <div class="tax-switch">
    <label class="form-check-label" for="taxSwitch">Display total after taxes</label>
    <input class="form-check-input" type="checkbox" id="taxSwitch">
  </div>
</div>


   <!-- <form method="GET" action="/listings/new">
    <button>Create new listing</button>

   </form>  -->
   <div class="row  row-cols-lg-3 row-cols-md-2 row-cols-sm-1 mt-2 g-3">
   <% for(let listing of allListings) { %>
    <a href="/listings/<%=listing._id %>" class="listing-link">
   <div class="card col mx-3" >
    <img src="<%= listing.image.url %>" class="card-img-top" alt="listing_image " style="height:19rem " >
    
    <div class="card-body">
      <p class="card-text mb-3">
       <b> <%= listing.title %></b><br />
       &#8377;<%= (Number(listing.price) || 0).toLocaleString("en-IN") %> /night
       <i class="tax-info"> &nbsp;+18% GST</i><br >

        <%= listing.location %>,<%= listing.country %>
      </p>
    </div>
  </div>
  </a>
  <%} %>
   </div>

   <script>
    let taxSwitch = document.getElementById("taxSwitch");
    taxSwitch.addEventListener("change", () => {
      let taxInfo = document.getElementsByClassName("tax-info");
      for (let info of taxInfo) {
        info.style.display = (info.style.display !== "inline") ? "inline" : "none";
      }
    });
  </script>